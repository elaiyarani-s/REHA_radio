{% extends "base.html" %}
{% block content %}
<h3>ðŸ“¨ Admin Chat Interface</h3>
<div id="messages" class="border p-3 mb-3" style="height:300px; overflow-y:auto;"></div>

<div class="mb-2">
    <input type="text" id="admin-to" class="form-control mb-2" placeholder="Reply to (nickname)">
    <input type="text" id="admin-message" class="form-control" placeholder="Type reply message">
    <button id="send-admin" class="btn btn-success mt-2">Send Reply</button>
</div>

<script>
    const adminSocket = new WebSocket('wss://' + window.location.host + '/ws/admin/');

    adminSocket.onmessage = function(e) {
        const data = JSON.parse(e.data);
        document.getElementById("messages").innerHTML += `
            <div><strong>${data.nickname}</strong>: ${data.message} <span class="text-muted">[${data.timestamp}]</span></div>
        `;
    };

    document.getElementById("send-admin").onclick = function() {
        const to = document.getElementById("admin-to").value.trim();
        const message = document.getElementById("admin-message").value.trim();

        if (to && message) {
            adminSocket.send(JSON.stringify({
                'to': to,
                'message': message
            }));
            document.getElementById("admin-message").value = '';
        }
    };
</script>
{% endblock %}
